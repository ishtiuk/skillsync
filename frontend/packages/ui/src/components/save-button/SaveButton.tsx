import { cn } from '@/lib/utils';
import { Typography } from '../typography';
import { useState } from 'react';

const buttonSize = {
  default: 'w-[98px] h-[44px] gap-1',
  large: 'w-[138px] h-[56px] gap-2'
};

export interface savedButtonProps extends React.HTMLAttributes<HTMLDivElement> {
  iconOnly?: boolean;
  size?: keyof typeof buttonSize;
  onSave?: () => void;
  saved: boolean;
  isSaving?: boolean;
}

function SavedButton({
  size = 'default',
  onSave,
  saved,
  isSaving = false,
  ...props
}: savedButtonProps) {
  //   const [saved, setSaved] = useState<boolean>(false);
  // TODO: save should store/remove the job in the applicant's list of jobs
  const handleClick: React.MouseEventHandler<HTMLButtonElement> = event => {
    event.preventDefault();
    // setSaved(!saved);
    onSave?.();
  };

  return (
    <button
      onClick={handleClick}
      className={cn(
        buttonSize[size],
        'flex items-center  justify-center rounded-[48px] group transition-all duration-300',

        `${
          isSaving
            ? 'cursor-not-allowed bg-yelllow-y-100 hover:bg-yellow-y-200 text-yellow-y-800'
            : saved === false
              ? 'bg-blue-b-100 hover:bg-blue-b-200 text-primary-g-800'
              : 'bg-primary-g-200 hover:bg-primary-g-300 text-primary-g-700'
        }`
      )}
    >
      {isSaving ? (
        <>
          {size === 'large' ? (
            <>
              <svg
                width="24"
                height="24"
                fill="none"
                viewBox="0 0 48 48"
                className="animate-spin"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M1.8 24C0.805887 24 -0.00702475 24.807 0.0674576 25.7983C0.376514 29.9117 1.74178 33.8871 4.04473 37.3337C6.68188 41.2805 10.4302 44.3566 14.8156 46.1731C19.201 47.9896 24.0266 48.4649 28.6822 47.5388C33.3377 46.6128 37.6141 44.327 40.9706 40.9706C44.327 37.6141 46.6128 33.3377 47.5388 28.6822C48.4649 24.0266 47.9896 19.201 46.1731 14.8156C44.3566 10.4302 41.2805 6.68188 37.3337 4.04473C33.8871 1.74179 29.9117 0.376515 25.7984 0.067458C24.807 -0.00702458 24 0.805887 24 1.8C24 2.79411 24.8075 3.59175 25.7977 3.67935C29.1982 3.98016 32.4793 5.13078 35.3336 7.03802C38.6884 9.2796 41.3031 12.4656 42.8471 16.1933C44.3912 19.9209 44.7952 24.0226 44.008 27.9798C43.2209 31.9371 41.278 35.572 38.425 38.425C35.572 41.278 31.9371 43.2209 27.9798 44.008C24.0226 44.7952 19.9209 44.3912 16.1933 42.8471C12.4656 41.3031 9.2796 38.6884 7.03802 35.3336C5.13078 32.4793 3.98016 29.1982 3.67935 25.7977C3.59175 24.8075 2.79411 24 1.8 24Z"
                  fill="#072924"
                />
              </svg>
            </>
          ) : (
            <>
              <svg
                width="20"
                height="20"
                fill="none"
                viewBox="0 0 48 48"
                className="animate-spin"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M1.8 24C0.805887 24 -0.00702475 24.807 0.0674576 25.7983C0.376514 29.9117 1.74178 33.8871 4.04473 37.3337C6.68188 41.2805 10.4302 44.3566 14.8156 46.1731C19.201 47.9896 24.0266 48.4649 28.6822 47.5388C33.3377 46.6128 37.6141 44.327 40.9706 40.9706C44.327 37.6141 46.6128 33.3377 47.5388 28.6822C48.4649 24.0266 47.9896 19.201 46.1731 14.8156C44.3566 10.4302 41.2805 6.68188 37.3337 4.04473C33.8871 1.74179 29.9117 0.376515 25.7984 0.067458C24.807 -0.00702458 24 0.805887 24 1.8C24 2.79411 24.8075 3.59175 25.7977 3.67935C29.1982 3.98016 32.4793 5.13078 35.3336 7.03802C38.6884 9.2796 41.3031 12.4656 42.8471 16.1933C44.3912 19.9209 44.7952 24.0226 44.008 27.9798C43.2209 31.9371 41.278 35.572 38.425 38.425C35.572 41.278 31.9371 43.2209 27.9798 44.008C24.0226 44.7952 19.9209 44.3912 16.1933 42.8471C12.4656 41.3031 9.2796 38.6884 7.03802 35.3336C5.13078 32.4793 3.98016 29.1982 3.67935 25.7977C3.59175 24.8075 2.79411 24 1.8 24Z"
                  fill="#072924"
                />
              </svg>
            </>
          )}
        </>
      ) : (
        <>
          {saved === false ? (
            <>
              {size === 'large' ? (
                <>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                  >
                    <path
                      d="M17.25 3H6.75C6.35218 3 5.97064 3.15804 5.68934 3.43934C5.40804 3.72064 5.25 4.10218 5.25 4.5V21C5.25007 21.1338 5.28595 21.2652 5.35393 21.3805C5.42191 21.4958 5.5195 21.5908 5.63659 21.6557C5.75367 21.7206 5.88598 21.7529 6.01978 21.7494C6.15358 21.7458 6.284 21.7066 6.3975 21.6356L12 18.1341L17.6034 21.6356C17.7169 21.7063 17.8472 21.7454 17.9809 21.7488C18.1146 21.7522 18.2467 21.7198 18.3636 21.655C18.4806 21.5902 18.5781 21.4953 18.646 21.3801C18.7139 21.2649 18.7498 21.1337 18.75 21V4.5C18.75 4.10218 18.592 3.72064 18.3107 3.43934C18.0294 3.15804 17.6478 3 17.25 3Z"
                      fill="#072924"
                    />
                  </svg>
                </>
              ) : (
                <>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="20"
                    height="20"
                    viewBox="0 0 20 20"
                    fill="none"
                  >
                    <path
                      d="M14.375 2.5H5.625C5.29348 2.5 4.97554 2.6317 4.74112 2.86612C4.5067 3.10054 4.375 3.41848 4.375 3.75V17.5C4.37506 17.6115 4.40496 17.721 4.46161 17.8171C4.51826 17.9132 4.59959 17.9924 4.69716 18.0464C4.79473 18.1005 4.90498 18.1274 5.01648 18.1245C5.12798 18.1215 5.23666 18.0888 5.33125 18.0297L10 15.1117L14.6695 18.0297C14.7641 18.0886 14.8727 18.1212 14.9841 18.124C15.0955 18.1268 15.2056 18.0998 15.303 18.0458C15.4005 17.9918 15.4817 17.9127 15.5383 17.8167C15.5949 17.7208 15.6249 17.6114 15.625 17.5V3.75C15.625 3.41848 15.4933 3.10054 15.2589 2.86612C15.0245 2.6317 14.7065 2.5 14.375 2.5Z"
                      fill="#072924"
                    />
                  </svg>
                </>
              )}
            </>
          ) : (
            <>
              {size === 'default' ? (
                <>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    viewBox="0 0 18 18"
                    fill="none"
                  >
                    <path
                      d="M9 0.875C7.39303 0.875 5.82214 1.35152 4.486 2.24431C3.14985 3.1371 2.10844 4.40605 1.49348 5.8907C0.87852 7.37535 0.717618 9.00901 1.03112 10.5851C1.34463 12.1612 2.11846 13.6089 3.25476 14.7452C4.39106 15.8815 5.8388 16.6554 7.41489 16.9689C8.99099 17.2824 10.6247 17.1215 12.1093 16.5065C13.594 15.8916 14.8629 14.8502 15.7557 13.514C16.6485 12.1779 17.125 10.607 17.125 9C17.1227 6.84581 16.266 4.78051 14.7427 3.25727C13.2195 1.73403 11.1542 0.877275 9 0.875ZM12.5672 7.56719L8.19219 11.9422C8.13415 12.0003 8.06522 12.0464 7.98934 12.0779C7.91347 12.1093 7.83214 12.1255 7.75 12.1255C7.66787 12.1255 7.58654 12.1093 7.51067 12.0779C7.43479 12.0464 7.36586 12.0003 7.30782 11.9422L5.43282 10.0672C5.31554 9.94991 5.24966 9.79085 5.24966 9.625C5.24966 9.45915 5.31554 9.30009 5.43282 9.18281C5.55009 9.06554 5.70915 8.99965 5.875 8.99965C6.04086 8.99965 6.19992 9.06554 6.31719 9.18281L7.75 10.6164L11.6828 6.68281C11.7409 6.62474 11.8098 6.57868 11.8857 6.54725C11.9616 6.51583 12.0429 6.49965 12.125 6.49965C12.2071 6.49965 12.2884 6.51583 12.3643 6.54725C12.4402 6.57868 12.5091 6.62474 12.5672 6.68281C12.6253 6.74088 12.6713 6.80982 12.7027 6.88569C12.7342 6.96156 12.7504 7.04288 12.7504 7.125C12.7504 7.20712 12.7342 7.28844 12.7027 7.36431C12.6713 7.44018 12.6253 7.50912 12.5672 7.56719Z"
                      fill="#0E5249"
                    />
                  </svg>
                </>
              ) : (
                <>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                  >
                    <path
                      d="M12 2.25C10.0716 2.25 8.18657 2.82183 6.58319 3.89317C4.97982 4.96451 3.73013 6.48726 2.99218 8.26884C2.25422 10.0504 2.06114 12.0108 2.43735 13.9021C2.81355 15.7934 3.74215 17.5307 5.10571 18.8943C6.46928 20.2579 8.20656 21.1865 10.0979 21.5627C11.9892 21.9389 13.9496 21.7458 15.7312 21.0078C17.5127 20.2699 19.0355 19.0202 20.1068 17.4168C21.1782 15.8134 21.75 13.9284 21.75 12C21.7473 9.41498 20.7192 6.93661 18.8913 5.10872C17.0634 3.28084 14.585 2.25273 12 2.25ZM16.2806 10.2806L11.0306 15.5306C10.961 15.6004 10.8783 15.6557 10.7872 15.6934C10.6962 15.7312 10.5986 15.7506 10.5 15.7506C10.4014 15.7506 10.3038 15.7312 10.2128 15.6934C10.1218 15.6557 10.039 15.6004 9.96938 15.5306L7.71938 13.2806C7.57865 13.1399 7.49959 12.949 7.49959 12.75C7.49959 12.551 7.57865 12.3601 7.71938 12.2194C7.86011 12.0786 8.05098 11.9996 8.25 11.9996C8.44903 11.9996 8.6399 12.0786 8.78063 12.2194L10.5 13.9397L15.2194 9.21937C15.2891 9.14969 15.3718 9.09442 15.4628 9.0567C15.5539 9.01899 15.6515 8.99958 15.75 8.99958C15.8486 8.99958 15.9461 9.01899 16.0372 9.0567C16.1282 9.09442 16.2109 9.14969 16.2806 9.21937C16.3503 9.28906 16.4056 9.37178 16.4433 9.46283C16.481 9.55387 16.5004 9.65145 16.5004 9.75C16.5004 9.84855 16.481 9.94613 16.4433 10.0372C16.4056 10.1282 16.3503 10.2109 16.2806 10.2806Z"
                      fill="#0E5249"
                    />
                  </svg>
                </>
              )}
            </>
          )}
        </>
      )}

      <Typography
        variant={`${size === 'default' ? 'caption-strong' : 'body-strong'}`}
      >
        {isSaving ? (
          <>Saving</>
        ) : (
          <>{saved === false ? <>Save It</> : <>Saved</>}</>
        )}
      </Typography>
    </button>
  );
}

export { SavedButton };
